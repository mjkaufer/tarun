<html>
	<head>
	<style>
		/*from http://jsfiddle.net/924sefae/6/*/
		#internetPiano{
			width: 100%;
		}

		body{
			width: 800px;
			height: 200px;
			display: flex;
		}

		#kbd {
			height: 100%;
			padding: 1%;
			flex-flow: column;
			display: flex;
			flex: 4;
		}

		#keys {
			height: 100%;
			display: flex;
			flex: 8;
			justify-content: center;

		}

		.note {
			flex: 1;
			display: inline-flex;
			align-items: center;
			cursor: pointer;
		}

		.black {

			justify-content: center;
			position: relative;
			height: 70%;
			background-color: #474747;
			outline: 2px solid #474747;
			color: white;
			width: 8%;
			margin: 0 -4%
		}

		.active-key{
			background-color: #0ff !important;

		}

		.white {
			flex-flow: column;
			justify-content: flex-end;
			outline: 2px solid #474747;
			color: #474747;
			background-color: #ffffff;
			padding-bottom: 1%;
		}

	</style>
	</head>
	<body>
		<div id="internetPiano">
			<!--taken from http://jsfiddle.net/924sefae/6/, modified slightly-->
			<div id="kbd">

				<div id="keys">

					<div id="a" class="note white">A</div>
					<div id="w" class="note black">W</div>
					<div id="s" class="note white">S</div>
					<div id="e" class="note black">E</div>
					<div id="d" class="note white">D</div>
					<div id="r" class="note black">R</div>
					<div id="f" class="note white">F</div>
					<div id="g" class="note white">G</div>
					<div id="y" class="note black">Y</div>
					<div id="h" class="note white">H</div>
					<div id="u" class="note black">U</div>
					<div id="j" class="note white">J</div>
					<div id="k" class="note white">K</div>
					<!--
					<div id="o" class="note black">O</div>
					<div id="l" class="note white">L</div>
					<div id="p" class="note black">P</div>
					<div id=";" class="note white">;</div>
					<div id="[" class="note black">[</div>
					<div id="'" class="note white">'</div>
					-->

				</div>


			</div>

		</div>

		<script>
			var keys = [].slice.call(document.getElementsByClassName('note')).map(function(e){
				return e.id
			});

			var timeoutList = []
			var activeLength = 100

			function clearTimeoutList(){
				timeoutList.forEach(function(e){
					clearTimeout(e)
				})

				timeoutList = []
			}

			[].slice.call(document.getElementsByClassName('note')).forEach(function(e){
				e.onclick = function(ev){
					playNoise(getHalfStep(ev.target.id))
					toggleActive(ev.target.id)
				}
			})

			function getHalfStep(key){
				return keys.indexOf(key)
			}

			function keyCodeToCharacter(keyCode){//219
				return String.fromCharCode(keyCode).toLowerCase()
			}

			document.onkeydown = function(e){
				
				var key = keyCodeToCharacter(e.which)
				toggleActive(key)

				playNoise(getHalfStep(key))

			}


			function playNoise(halfStep){
				if(halfStep == -1)//will need to fix later to allow negative half steps, but it'll work for now
					return

				console.log(halfStep)
				//...
			}

			function toggleActive(id){
				console.log(id)
				clearTimeoutList()
				document.getElementById(id).classList.add('active-key')

				setTimeout(function(){

					document.getElementById(id).classList.remove('active-key')

				}, activeLength)
			}
		</script>
	</body>
</html>